<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eric Turner</title>
    <link rel="stylesheet" href="css/jquery.terminal.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/prism.css">
    <script src="https://kit.fontawesome.com/746513db68.js" crossorigin="anonymous"></script>
</head>
<body id="terminal">

    <script src="js/jQuery/jquery-3.6.0.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/prism.js"></script>
    <script src="js/jQuery/jquery.terminal.min.js"></script>

    <script>
        //how many characters per line
        var cols = 120;
        if(window.innerWidth < 800){
            cols = 45;
        }


        

        function dateToYMD(date) {
            if(date == 'Present') return 'Present';
            var date = new Date(date);
            var strArray=['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var m = strArray[date.getMonth()];
            var y = date.getFullYear();
            return '' +  m + ' ' + y;
        }

        function indent(term, spaces, text, extrapadding=0){
            // how many spaces at beginning of line, usually 4, 8, 12
            var indentation = '';
            for (i = 0; i < spaces; i++){
                indentation += ' ';
            }
            term.echo(stringDivider(text, cols+extrapadding, indentation, '\n'));

        }
        //modifed version of https://stackoverflow.com/questions/14484787/wrap-text-in-javascript
        function stringDivider(str, width, prefix, postfix) {
            if (str.length>width) {
                var p=width
                for (;p>0 && !/\s/.test(str[p]); p--) {
                }
                if (p>0) {
                    var left = str.substring(0, p);
                    var right = str.substring(p+1);
                    return prefix + left + postfix + stringDivider(right, width, prefix, postfix);
                }
            }
            return prefix+ str;
        }

        function stars(number){
            var stars = ''
            for(i=0; i < number; i++){
                stars += '[[;;;fas fa-star] ]'
            }
            return stars;
        }

        function project_color(tags){
            var colors = '';

            $.each(tags, function(index, obj){
                var color = '';
                switch (obj){
                    case 'python': color = '#06D6A0'; break;
                    case 'web': color = '#3a7bd5'; break;
                    case 'php' : color = '#FFD166'; break;
                    case 'automotive': color = '#EB1E4E'; break;
                    case 'cybersecurity': color = '#049570'; break;
                    default: color = '#fff'; break;
                }
                colors += '<span style="color: '+color+'"> ['+obj+'] </span>';
            });
            return colors;
        }

        $(function() {

           


            var term = $('#terminal').terminal({
                help: function(){
                    this.echo('Type one of the below commands: ');
                    this.echo('[[b;aqua;]full  about   education   work   skills   projects   contact   blog');
                },
                full: function(){
                    this.exec('about');
                    this.exec('education');
                    this.exec('work');
                    this.exec('skills');
                    this.exec('projects');
                    this.exec('contact');
                },
                about: function(){
                    this.echo('[[b;aqua;]About Me ');
                    this.echo('    ' + context.about.name);
                    this.echo('    ' + context.about.title);
                    this.echo('    From ' + context.about.location);
                    this.echo(' ');
                },
                education: function(){
                    this.echo('[[b;aqua;]Education ');
                    $.each(context.sections[0].items, function(i){
                        term.echo('    [[b;white;]' + context.sections[0].items[i].title);
                        indent(term, 8, '[[;;;fas fa-calendar] ] ' + dateToYMD(context.sections[0].items[i].start_date) + ' - ' + dateToYMD(context.sections[0].items[i].end_date));
                        indent(term, 8, '[[;;;fas fa-building] ] ' + context.sections[0].items[i].place)
                        indent(term, 8, '[[;;;fas fa-compass] ] ' + context.sections[0].items[i].location)
                        indent(term, 8, '[[;;;fas fa-quote-left] ] ' + context.sections[0].items[i].desc);
                    });
                },
                work: function(){
                    this.echo('[[b;aqua;]Work ');
                    $.each(context.sections[1].items, function(i){
                        term.echo('    [[b;white;]' + context.sections[1].items[i].title);
                        indent(term, 8, '[[;;;fas fa-calendar] ] ' + dateToYMD(context.sections[1].items[i].start_date) + ' - ' + dateToYMD(context.sections[1].items[i].end_date));
                        indent(term, 8, '[[;;;fas fa-building] ] ' + context.sections[1].items[i].place)
                        indent(term, 8, '[[;;;fas fa-compass] ] ' + context.sections[1].items[i].location)
                        indent(term, 8, '[[;;;fas fa-quote-left] ] ' + context.sections[1].items[i].desc);
                    });
                },
                skills: function(){
                    this.echo('[[b;aqua;]Skills ');
                    $.each(context.skillset, function(i, obj){
                        term.echo('    [[b;white;]' + obj.title);
                        $.each(obj.skills, function(i, obj){
                            indent(term, 8, obj.title + ' - ' + stars(obj.proficiency), 80);
                        }); 
                    });
                },
                
                projects: function(){
                    this.echo('[[b;aqua;]Projects ');
                    $.each(context.projects, function(i, obj){
                        term.echo('<span>&nbsp;&nbsp;&nbsp;&nbsp;</span>' +'<a href="'+obj.url+'" target="_blank">'+obj.title+'</a> - ' + project_color(obj.tags), {raw: true});
                    });
                },

                contact: function(){
                    this.echo('[[b;aqua;]Contact ');
                    indent(term, 4, context.contact.notes);
                    $.each(context.contact.methods, function(i, obj){
                        term.echo('<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>' + '<a href="'+obj.url+'" target="_blank"><i class="'+obj.icon+'"></i> '+obj.title+'</a>', {raw: true});
                    });
                    
                },
                blog: function(){
                    this.echo('Launching blog in new tab...');
                    window.open('https://blog.ericturner.it', '_blank');
                }
            }, {
                greetings: `
 ___  __     __     ___       __        ___  __  
|__  |__) | /  \`     |  |  | |__) |\\ | |__  |__) 
|___ |  \\ | \\__,     |  \\__/ |  \\ | \\| |___ |  \\ 

Â© Eric Turner 2021 - Made with jQuery Terminal

                `
            });

            // start with help initialized
            term.set_prompt("guest@ericturner.it:/$ ");
            term.exec('help');


            // handle keyboard popping up
            $('.cmd').click(function(){
                console.log('Command line clicked');
                var lastWindowWidth = $(window).width(),
                lastWindowHeight = $(window).height();

                $(window).resize(function() {

                    var newWindowWidth = $(window).width(),
                        newWindowHeight = $(window).height();

                    if( newWindowHeight > lastWindowHeight && newWindowWidth == lastWindowWidth ) {

                        // Keyboard closed
                        // ...

                    }

                    lastWindowWidth = newWindowWidth;
                    lastWindowHeight = newWindowHeight;

                });
            });
        });
    </script>
</body>
</html>